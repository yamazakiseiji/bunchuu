SH SERIES C/C++ Compiler (V.9.02.00.003)                                                         08-Sep-2023 13:46:36  PAGE    1

************ OBJECT LISTING ************

FILE NAME: C:\Users\SeijiYamazaki\Documents\Quickgene\Soft_Firm\QuickGene_Project2\tskpunit.c

SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

           tskpunit.c          1    /******************************************************************************
           tskpunit.c          2    * 圧力センサユニット制御タスク                                                *
           tskpunit.c          3    *                                                                             *
           tskpunit.c          4    * File name : tskpunit.c                                                      *
           tskpunit.c          5    *                                                                             *
           tskpunit.c          6    * Copyright (c) 2023 NICHIRYO Co., Ltd.                                       *
           tskpunit.c          7    *                                                                             *
           tskpunit.c          8    ******************************************************************************/
           tskpunit.c          9    #include <kernel.h>
           tskpunit.c         10    #include "sh7237.h"
           tskpunit.c         11    #include "iodefine.h"
           tskpunit.c         12    #include "define.h"
           tskpunit.c         13    #include "datastruct.h"
           tskpunit.c         14    #include "tskcmd.h"
           tskpunit.c         15    #include "tskmotact.h"
           tskpunit.c         16    #include "mnet.h"
           tskpunit.c         17    #include "sub.h"
           tskpunit.c         18    #include "tblchr.h"
           tskpunit.c         19    #include "automachine.h"
           tskpunit.c         20    #include "tskpunit.h"
           tskpunit.c         21    
           tskpunit.c         22    
           tskpunit.c         23    //*************************************
           tskpunit.c         24    // define
           tskpunit.c         25    //*************************************
           tskpunit.c         26    #define MOTIONNET_STATUS_INPUT_CHG_INTR       0x04// 入力変化割り込み
           tskpunit.c         27    #define MOTIONNET_STATUS_DATA_TRNS_COMP       0x01// データ通信完了
           tskpunit.c         28    #define MOTIONNET_CMD_TX_FLAG_RST         0x02// 送信フラグリセット
           tskpunit.c         29    #define MOTIONNET_CMD_MSG_TX              0x01// メッセージ送信コマンド
           tskpunit.c         30    #define MOTIONNET_TX_DATA_NOTHING         0x00// 空のデータ
           tskpunit.c         31    #define MOTIONNET_INTR_FLAG                   0x01// 割り込みフラグ
           tskpunit.c         32    #define MOTIONNET_INPUT_CHG_INTR_ENABLE       0x01// 入力変化割り込み許可
           tskpunit.c         33    
           tskpunit.c         34    #define MNET_CMD_VALVEOUT_INI             0x00// 電磁弁初期化指示
           tskpunit.c         35    #define MNET_CMD_PRESSURE_INI             0x01// 圧力値初期化指示
           tskpunit.c         36    #define MNET_CMD_PRESSURE_REN             0x02// 圧力値取得（連続）
           tskpunit.c         37    #define MNET_CMD_PRESSURE_TAN             0x03// 圧力値取得（単独）
           tskpunit.c         38    #define MNET_CMD_PRESSURE_CAN             0x04// 圧力値取得キャンセル
           tskpunit.c         39    #define MNET_CMD_VALVEOUT_REQ             0x05// 電磁弁出力指示
           tskpunit.c         40    
           tskpunit.c         41    
           tskpunit.c         42    #define   MOTIONNET_ADDR                      0x0C008000  
           tskpunit.c         43    
           tskpunit.c         44    enum NmMotionnetState{
           tskpunit.c         45      NmMotionnetState_Norequest = 0,
           tskpunit.c         46      NmMotionnetState_Init,
           tskpunit.c         47      NmMotionnetState_IntrWait1,
           tskpunit.c         48      NmMotionnetState_IntrWait2,
           tskpunit.c         49      NmMotionnetState_IntrWait3,
           tskpunit.c         50      NmMotionnetState_IntrWait4,
           tskpunit.c         51      NmMotionnetState_IntrWait5
           tskpunit.c         52    };
           tskpunit.c         53    
           tskpunit.c         54    //*************************************
           tskpunit.c         55    // 内部関数
           tskpunit.c         56    //*************************************
           tskpunit.c         57    static void PresUnitInit();
           tskpunit.c         58    static void PresUnitProc();
           tskpunit.c         59    static void PresUnitProcReq( T_CMD_MSG* mrcv );
           tskpunit.c         60    void  check_pressure_motionnet_initialize( void );
           tskpunit.c         61    void  check_pressure_motionnet_handle( unsigned char kind );
           tskpunit.c         62    void  check_pressure_motionnet_default( void );
           tskpunit.c         63    void PressDataGet( unsigned short *buf );
           tskpunit.c         64    unsigned char set_punit_cmd( unsigned char kind );
           tskpunit.c         65    
           tskpunit.c         66    //*************************************
           tskpunit.c         67    // データ定義
           tskpunit.c         68    //*************************************
           tskpunit.c         69    struct StMotionnet        *pMotionnetPunit;
           tskpunit.c         70    static unsigned short MotionnetState;
           tskpunit.c         71    static unsigned char  msg_req;
           tskpunit.c         72    static ST_VOUT            vout;
           tskpunit.c         73    static T_MSG_DAT      reqbk;
           tskpunit.c         74    static unsigned short presdat[NOZZLE_MAX+1];
           tskpunit.c         75    static unsigned char  renmsg;
           tskpunit.c         76    static unsigned short renflag;
           tskpunit.c         77    static unsigned short rencnt;
           tskpunit.c         78    static unsigned short actflag;
           tskpunit.c         79    
           tskpunit.c         80    /******************************************************************************
           tskpunit.c         81    * 
           tskpunit.c         82    * [概要]  圧力制御タスク
           tskpunit.c         83    * [引数]  －
           tskpunit.c         84    * [戻値]  －
           tskpunit.c         85    * 
           tskpunit.c         86    ******************************************************************************/
           tskpunit.c         87    TASK TskPunit( void )
P   00000000              _TskPunit:                       ; function: TskPunit
                                                           ; frame size=4
    00000000 7FFC                   ADD         #-4,R15
           tskpunit.c         88    {
           tskpunit.c         89      ER          errflg;
           tskpunit.c         90      T_CMD_MSG*  msg;
           tskpunit.c         91    
           tskpunit.c         92      check_pressure_motionnet_initialize();
    00000002 B0A0                   BSR         _check_pressure_motionnet_initialize
    00000004 0009                   NOP
    00000006 DC67                   MOV.L       L168+2,R12 ; _v4_trcv_mbx
    00000008 DD67                   MOV.L       L168+6,R13 ; L179
    0000000A DE68                   MOV.L       L168+10,R14; _api_rel_mpf
    0000000C              L11:
           tskpunit.c         93    
           tskpunit.c         94      for( ;; )
           tskpunit.c         95      {
           tskpunit.c         96            errflg = trcv_mbx( ID_MBX_PUNIT, (T_MSG**)&msg, DLY_10M );
    0000000C E60A                   MOV         #10,R6     ; H'0000000A
    0000000E E40D                   MOV         #13,R4     ; H'0000000D
    00000010 4C0B                   JSR         @R12
    00000012 65F3                   MOV         R15,R5
           tskpunit.c         97    
           tskpunit.c         98          if( errflg == E_TMOUT )
    00000014 88CE                   CMP/EQ      #-50,R0
    00000016 8B03                   BF          L13
           tskpunit.c         99          {
           tskpunit.c        100              PresUnitProc();
    00000018 B04E                   BSR         __$PresUnitProc
    0000001A 0009                   NOP
    0000001C A002                   BRA         L14
    0000001E 0009                   NOP
    00000020              L13:
           tskpunit.c        101          }
           tskpunit.c        102          else
           tskpunit.c        103          {
           tskpunit.c        104              PresUnitProcReq(msg);
    00000020 B007                   BSR         __$PresUnitProcReq
    00000022 64F2                   MOV.L       @R15,R4    ; msg
    00000024              L14:
    00000024 67F2                   MOV.L       @R15,R7    ; msg
           tskpunit.c        105          }
           tskpunit.c        106          // メモリ解放
           tskpunit.c        107          RelMpf( ID_MPF_PUNIT, (VP)msg );
    00000026 E60C                   MOV         #12,R6     ; H'0000000C
    00000028 E56B                   MOV         #107,R5    ; H'0000006B
    0000002A 4E0B                   JSR         @R14
    0000002C 64D3                   MOV         R13,R4
    0000002E AFED                   BRA         L11
    00000030 0009                   NOP
           tskpunit.c        108      }
           tskpunit.c        109    }
           tskpunit.c        110    /******************************************************************************
           tskpunit.c        111    * 
           tskpunit.c        112    * [概要]  初期化
           tskpunit.c        113    * [引数]  －
           tskpunit.c        114    * [戻値]  －
           tskpunit.c        115    * 
           tskpunit.c        116    ******************************************************************************/
           tskpunit.c        117    static void PresUnitInit()
           tskpunit.c        118    {
           tskpunit.c        119      MotionnetState = NmMotionnetState_Norequest;
           tskpunit.c        120      memset( &reqbk.tskid, CLR, sizeof( T_MSG_DAT ) );
           tskpunit.c        121      memset( &vout,    CLR,    sizeof( ST_VOUT ));
           tskpunit.c        122      memset( &presdat, CLR,    NOZZLE_MAX+1       );
           tskpunit.c        123      msg_req = CLR;
           tskpunit.c        124      actflag = CLR;
           tskpunit.c        125    }
           tskpunit.c        126    /***********************************************************************
           tskpunit.c        127    * 
           tskpunit.c        128    * [概要]  コマンドリクエスト
           tskpunit.c        129    * [引数]  mrcv:メッセージ電文
           tskpunit.c        130    * [戻値]  －
           tskpunit.c        131    * 
           tskpunit.c        132    ***********************************************************************/
           tskpunit.c        133    static void PresUnitProcReq( T_CMD_MSG* mrcv )
    00000032              __$PresUnitProcReq:              ; function: __$PresUnitProcReq
                                                           ; frame size=4
    00000032 4F22                   STS.L       PR,@-R15
           tskpunit.c        134    {
           tskpunit.c        135      msg_req = mrcv->msgdata.msgid;
    00000034 3141401B               MOV.B       @(27:12,R4),R1; (mrcv)->msgid
    00000038 D65D                   MOV.L       L168+14,R6 ; __$msg_req
    0000003A 2610                   MOV.B       R1,@R6     ; msg_req
           tskpunit.c        136      memcpy( &reqbk.tskid, &mrcv->msgdata.tskid, sizeof(T_MSG_DAT) );
    0000003C 7414                   ADD         #20,R4
    0000003E 6543                   MOV         R4,R5
    00000040 D45C                   MOV.L       L168+18,R4 ; __$reqbk
    00000042 D15D                   MOV.L       L168+22,R1 ; _memcpy
    00000044 410B                   JSR         @R1
    00000046 E64C                   MOV         #76,R6     ; H'0000004C
           tskpunit.c        137      actflag = CLR;
    00000048 E200                   MOV         #0,R2      ; H'00000000
    0000004A D55C                   MOV.L       L168+26,R5 ; __$actflag
           tskpunit.c        138    
           tskpunit.c        139      switch( msg_req )
    0000004C D758                   MOV.L       L168+14,R7 ; __$msg_req
    0000004E 2521                   MOV.W       R2,@R5     ; actflag
    00000050 E29B                   MOV         #-101,R2   ; H'FFFFFF9B
    00000052 30718000               MOVU.B      @(0,R7),R0 ; msg_req
    00000056 622C                   EXTU.B      R2,R2
    00000058 3020                   CMP/EQ      R2,R0
    0000005A 8901                   BT          L32
    0000005C 8822                   CMP/EQ      #34,R0
    0000005E 8B06                   BF          L33
    00000060              L32:
           tskpunit.c        140      {
           tskpunit.c        141      case ID_MSG_VALVEOUT:
           tskpunit.c        142      case ID_MSG_VALVEOUT_HS:
           tskpunit.c        143          memcpy( &vout.target, &reqbk.data[0],sizeof(ST_VOUT) );
    00000060 D557                   MOV.L       L168+30,R5 ; H'00000010+__$reqbk
    00000062 D458                   MOV.L       L168+34,R4 ; __$vout
    00000064 D154                   MOV.L       L168+22,R1 ; _memcpy
    00000066 410B                   JSR         @R1
    00000068 E604                   MOV         #4,R6      ; H'00000004
    0000006A A01E                   BRA         L34
    0000006C 0009                   NOP
    0000006E              L33:
    0000006E E596                   MOV         #-106,R5   ; H'FFFFFF96
    00000070 655C                   EXTU.B      R5,R5
    00000072 3050                   CMP/EQ      R5,R0
    00000074 8919                   BT          L34
    00000076 881D                   CMP/EQ      #29,R0
    00000078 8917                   BT          L34
    0000007A E597                   MOV         #-105,R5   ; H'FFFFFF97
    0000007C 655C                   EXTU.B      R5,R5
    0000007E 3050                   CMP/EQ      R5,R0
    00000080 8913                   BT          L34
    00000082 881E                   CMP/EQ      #30,R0
    00000084 8911                   BT          L34
    00000086 E598                   MOV         #-104,R5   ; H'FFFFFF98
    00000088 655C                   EXTU.B      R5,R5
    0000008A 3050                   CMP/EQ      R5,R0
    0000008C 890D                   BT          L34
    0000008E 881F                   CMP/EQ      #31,R0
    00000090 890B                   BT          L34
    00000092 E599                   MOV         #-103,R5   ; H'FFFFFF99
    00000094 655C                   EXTU.B      R5,R5
    00000096 3050                   CMP/EQ      R5,R0
    00000098 8907                   BT          L34
    0000009A 8820                   CMP/EQ      #32,R0
    0000009C 8905                   BT          L34
    0000009E E59A                   MOV         #-102,R5   ; H'FFFFFF9A
    000000A0 655C                   EXTU.B      R5,R5
    000000A2 3050                   CMP/EQ      R5,R0
    000000A4 8901                   BT          L34
    000000A6 8821                   CMP/EQ      #33,R0
    000000A8 8B04                   BF          L44
    000000AA              L34:
           tskpunit.c        144      
           tskpunit.c        145      // ↓↓↓↓ 下へ ↓↓↓↓
           tskpunit.c        146      
           tskpunit.c        147      
           tskpunit.c        148      case ID_MSG_VALVEINI:
           tskpunit.c        149      case ID_MSG_VALVEINI_HS:
           tskpunit.c        150      case ID_MSG_PRESSINI:
           tskpunit.c        151      case ID_MSG_PRESSINI_HS:
           tskpunit.c        152      case ID_MSG_PRESSREN:
           tskpunit.c        153      case ID_MSG_PRESSREN_HS:
           tskpunit.c        154      case ID_MSG_PRESSTAN:
           tskpunit.c        155      case ID_MSG_PRESSTAN_HS:
           tskpunit.c        156      case ID_MSG_PRESSCAN:
           tskpunit.c        157      case ID_MSG_PRESSCAN_HS:
           tskpunit.c        158          MotionnetState = NmMotionnetState_Init;
    000000AA E201                   MOV         #1,R2      ; H'00000001
    000000AC D646                   MOV.L       L168+38,R6 ; __$MotionnetState
    000000AE 2621                   MOV.W       R2,@R6     ; MotionnetState
           tskpunit.c        159          PresUnitProc();
    000000B0 A002                   BRA         __$PresUnitProc
    000000B2 4F26                   LDS.L       @R15+,PR
    000000B4              L44:
    000000B4 4F26                   LDS.L       @R15+,PR
    000000B6 006B                   RTS/N
           tskpunit.c        160          break;
           tskpunit.c        161          
           tskpunit.c        162      default:
           tskpunit.c        163          break;
           tskpunit.c        164      }
           tskpunit.c        165    }
           tskpunit.c        166    
           tskpunit.c        167    /***********************************************************************
           tskpunit.c        168    * 
           tskpunit.c        169    * [概要]  リクエスト処理
           tskpunit.c        170    * [引数]  －
           tskpunit.c        171    * [戻値]  －
           tskpunit.c        172    * 
           tskpunit.c        173    ***********************************************************************/
           tskpunit.c        174    static void PresUnitProc()
    000000B8              __$PresUnitProc:                 ; function: __$PresUnitProc
                                                           ; frame size=0
           tskpunit.c        175    {
           tskpunit.c        176      switch( msg_req )
    000000B8 D23D                   MOV.L       L168+14,R2 ; __$msg_req
    000000BA 6420                   MOV.B       @R2,R4     ; msg_req
    000000BC E596                   MOV         #-106,R5   ; H'FFFFFF96
    000000BE 655C                   EXTU.B      R5,R5
    000000C0 604C                   EXTU.B      R4,R0
    000000C2 3050                   CMP/EQ      R5,R0
    000000C4 891F                   BT          L61
    000000C6 881D                   CMP/EQ      #29,R0
    000000C8 891D                   BT          L61
    000000CA E597                   MOV         #-105,R5   ; H'FFFFFF97
    000000CC 655C                   EXTU.B      R5,R5
    000000CE 3050                   CMP/EQ      R5,R0
    000000D0 8919                   BT          L61
    000000D2 881E                   CMP/EQ      #30,R0
    000000D4 8917                   BT          L61
    000000D6 E598                   MOV         #-104,R5   ; H'FFFFFF98
    000000D8 655C                   EXTU.B      R5,R5
    000000DA 3050                   CMP/EQ      R5,R0
    000000DC 8913                   BT          L61
    000000DE 881F                   CMP/EQ      #31,R0
    000000E0 8911                   BT          L61
    000000E2 E599                   MOV         #-103,R5   ; H'FFFFFF99
    000000E4 655C                   EXTU.B      R5,R5
    000000E6 3050                   CMP/EQ      R5,R0
    000000E8 890D                   BT          L61
    000000EA 8820                   CMP/EQ      #32,R0
    000000EC 890B                   BT          L61
    000000EE E59A                   MOV         #-102,R5   ; H'FFFFFF9A
    000000F0 655C                   EXTU.B      R5,R5
    000000F2 3050                   CMP/EQ      R5,R0
    000000F4 8907                   BT          L61
    000000F6 8821                   CMP/EQ      #33,R0
    000000F8 8905                   BT          L61
    000000FA E59B                   MOV         #-101,R5   ; H'FFFFFF9B
    000000FC 655C                   EXTU.B      R5,R5
    000000FE 3050                   CMP/EQ      R5,R0
    00000100 8901                   BT          L61
    00000102 8822                   CMP/EQ      #34,R0
    00000104 8B01                   BF          L72
    00000106              L61:
           tskpunit.c        177      {
           tskpunit.c        178    #if 0
           tskpunit.c        179      case ID_MSG_VALVEINI:
           tskpunit.c        180      case ID_MSG_VALVEINI_HS:
           tskpunit.c        181          check_pressure_motionnet_handle( MNET_CMD_VALVEOUT_INI );
           tskpunit.c        182          break;
           tskpunit.c        183    
           tskpunit.c        184      case ID_MSG_PRESSINI:
           tskpunit.c        185      case ID_MSG_PRESSINI_HS:
           tskpunit.c        186          check_pressure_motionnet_handle( MNET_CMD_PRESSURE_INI );
           tskpunit.c        187          break;
           tskpunit.c        188          
           tskpunit.c        189      case ID_MSG_PRESSREN:
           tskpunit.c        190      case ID_MSG_PRESSREN_HS:
           tskpunit.c        191          check_pressure_motionnet_handle( MNET_CMD_PRESSURE_REN );
           tskpunit.c        192          break;
           tskpunit.c        193          
           tskpunit.c        194      case ID_MSG_PRESSTAN:
           tskpunit.c        195      case ID_MSG_PRESSTAN_HS:
           tskpunit.c        196          check_pressure_motionnet_handle( MNET_CMD_PRESSURE_TAN );
           tskpunit.c        197          break;
           tskpunit.c        198          
           tskpunit.c        199      case ID_MSG_PRESSCAN:
           tskpunit.c        200      case ID_MSG_PRESSCAN_HS:
           tskpunit.c        201          check_pressure_motionnet_handle( MNET_CMD_PRESSURE_CAN );
           tskpunit.c        202          break;
           tskpunit.c        203          
           tskpunit.c        204      case ID_MSG_VALVEOUT:
           tskpunit.c        205      case ID_MSG_VALVEOUT_HS:
           tskpunit.c        206          check_pressure_motionnet_handle( MNET_CMD_VALVEOUT_REQ );
           tskpunit.c        207          break;
           tskpunit.c        208    #endif
           tskpunit.c        209      case ID_MSG_VALVEINI:
           tskpunit.c        210      case ID_MSG_VALVEINI_HS:
           tskpunit.c        211      case ID_MSG_PRESSINI:
           tskpunit.c        212      case ID_MSG_PRESSINI_HS:
           tskpunit.c        213      case ID_MSG_PRESSREN:
           tskpunit.c        214      case ID_MSG_PRESSREN_HS:
           tskpunit.c        215      case ID_MSG_PRESSTAN:
           tskpunit.c        216      case ID_MSG_PRESSTAN_HS:
           tskpunit.c        217      case ID_MSG_PRESSCAN:
           tskpunit.c        218      case ID_MSG_PRESSCAN_HS:
           tskpunit.c        219      case ID_MSG_VALVEOUT:
           tskpunit.c        220      case ID_MSG_VALVEOUT_HS:
           tskpunit.c        221          check_pressure_motionnet_handle( msg_req );
    00000106 A02D                   BRA         _check_pressure_motionnet_handle
    00000108 0009                   NOP
    0000010A              L72:
           tskpunit.c        222          break;
           tskpunit.c        223      default:
           tskpunit.c        224          if ( renflag == ON ) 
    0000010A D630                   MOV.L       L168+42,R6 ; __$renflag
    0000010C 6061                   MOV.W       @R6,R0     ; renflag
    0000010E 8801                   CMP/EQ      #1,R0
    00000110 8B18                   BF          L75
           tskpunit.c        225          {
           tskpunit.c        226              rencnt++;
    00000112 D52F                   MOV.L       L168+46,R5 ; __$rencnt
    00000114 6151                   MOV.W       @R5,R1     ; rencnt
    00000116 E414                   MOV         #20,R4     ; H'00000014
    00000118 7101                   ADD         #1,R1
           tskpunit.c        227              if (( rencnt >= 20 ) &&( actflag == CLR))
    0000011A 621D                   EXTU.W      R1,R2
    0000011C 3243                   CMP/GE      R4,R2
    0000011E 8F08                   BF/S        L77
    00000120 2511                   MOV.W       R1,@R5     ; rencnt
    00000122 D626                   MOV.L       L168+26,R6 ; __$actflag
    00000124 6261                   MOV.W       @R6,R2     ; actflag
    00000126 2228                   TST         R2,R2
    00000128 8B03                   BF          L77
           tskpunit.c        228              {
           tskpunit.c        229                  actflag = SET;
    0000012A E201                   MOV         #1,R2      ; H'00000001
           tskpunit.c        230                  MotionnetState = NmMotionnetState_Init;
    0000012C D726                   MOV.L       L168+38,R7 ; __$MotionnetState
    0000012E 2721                   MOV.W       R2,@R7     ; MotionnetState
    00000130 2621                   MOV.W       R2,@R6     ; actflag
    00000132              L77:
           tskpunit.c        231              }
           tskpunit.c        232          
           tskpunit.c        233              if( actflag == SET )
    00000132 D622                   MOV.L       L168+26,R6 ; __$actflag
    00000134 6061                   MOV.W       @R6,R0     ; actflag
    00000136 8801                   CMP/EQ      #1,R0
    00000138 8B04                   BF          L75
           tskpunit.c        234              {
           tskpunit.c        235                  rencnt = 0;
           tskpunit.c        236                  check_pressure_motionnet_handle( renmsg );
    0000013A D626                   MOV.L       L168+50,R6 ; __$renmsg
    0000013C E100                   MOV         #0,R1      ; H'00000000
    0000013E 6460                   MOV.B       @R6,R4     ; renmsg
    00000140 A010                   BRA         _check_pressure_motionnet_handle
    00000142 2511                   MOV.W       R1,@R5     ; rencnt
    00000144              L75:
    00000144 006B                   RTS/N
           tskpunit.c        237              }
           tskpunit.c        238          }
           tskpunit.c        239          break;
           tskpunit.c        240      }
           tskpunit.c        241    }
           tskpunit.c        242    
           tskpunit.c        243    //==============================================================================
           tskpunit.c        244    //    Function    : check_pressure_motionnet_initialize
           tskpunit.c        245    //    Description : 圧力センサ基板のMotionnet検査の初期化
           tskpunit.c        246    //    Parameters  : なし
           tskpunit.c        247    //    Return      : なし
           tskpunit.c        248    //    Note        : 
           tskpunit.c        249    //    Global      : 
           tskpunit.c        250    //==============================================================================
           tskpunit.c        251    void  check_pressure_motionnet_initialize( void )
    00000146              _check_pressure_motionnet_initialize:
                                                           ; function: check_pressure_motionnet_initialize
                                                           ; frame size=0
           tskpunit.c        252    {
           tskpunit.c        253      unsigned long   setValue;
           tskpunit.c        254      
           tskpunit.c        255      pMotionnetPunit      = (struct StMotionnet *)MOTIONNET_ADDR;
    00000146 D124                   MOV.L       L168+54,R1 ; H'0C008000
           tskpunit.c        256      
           tskpunit.c        257      // Motionnetを初期化する
           tskpunit.c        258      // デバイス番号0の設定
           tskpunit.c        259      pMotionnetPunit->deviceInformation[0] = 0x8B;   // デバイス使用、データデバイス、P0～3:入入入出
    00000148 E48B                   MOV         #-117,R4   ; H'FFFFFF8B
    0000014A D524                   MOV.L       L168+58,R5 ; _pMotionnetPunit
    0000014C 2512                   MOV.L       R1,@R5     ; pMotionnetPunit
           tskpunit.c        260      
           tskpunit.c        261      // サイクリック通信を開始する
           tskpunit.c        262      pMotionnetPunit->commandStatus0 = (unsigned char)( MOTIONNET_CMD_CYCLIC_START >> 0 );
    0000014E E700                   MOV         #0,R7      ; H'00000000
    00000150 31410078               MOV.B       R4,@(120:12,R1); pMotionnetPunit->deviceInformation[]
    00000154 6152                   MOV.L       @R5,R1     ; pMotionnetPunit
           tskpunit.c        263      pMotionnetPunit->commandStatus1 = (unsigned char)( MOTIONNET_CMD_CYCLIC_START >> 8 );
    00000156 E030                   MOV         #48,R0     ; H'00000030
           tskpunit.c        264    
           tskpunit.c        265      MotionnetState = NmMotionnetState_Norequest;
    00000158 D61B                   MOV.L       L168+38,R6 ; __$MotionnetState
    0000015A 2170                   MOV.B       R7,@R1     ; (pMotionnetPunit)->commandStatus0
    0000015C 6252                   MOV.L       @R5,R2     ; pMotionnetPunit
    0000015E 8021                   MOV.B       R0,@(1,R2) ; (pMotionnetPunit)->commandStatus1
           tskpunit.c        266      
           tskpunit.c        267      // 念のための待ち
           tskpunit.c        268    //    wait_ms( 100 );
           tskpunit.c        269    }
    00000160 000B                   RTS
    00000162 2671                   MOV.W       R7,@R6     ; MotionnetState
           tskpunit.c        270    
           tskpunit.c        271    static    unsigned char wk1;
           tskpunit.c        272    static    unsigned char wk2;
           tskpunit.c        273    static    unsigned char wk3;
           tskpunit.c        274    static    unsigned char wk4;
           tskpunit.c        275      
           tskpunit.c        276    static        unsigned char   Rxdata[4];
           tskpunit.c        277      
           tskpunit.c        278    void  check_pressure_motionnet_handle( unsigned char kind )
    00000164              _check_pressure_motionnet_handle:
                                                           ; function: check_pressure_motionnet_handle
                                                           ; frame size=52
    00000164 4BF0                   MOVMU.L     R11,@-R15
    00000166 7FF8                   ADD         #-8,R15
    00000168 DD1C                   MOV.L       L168+58,R13; _pMotionnetPunit
           tskpunit.c        279    {
           tskpunit.c        280      ER  result = E_SUCCESS;
           tskpunit.c        281      unsigned char   cyclicError;
           tskpunit.c        282      unsigned char   IntrFlg;
           tskpunit.c        283      unsigned char   loop;
           tskpunit.c        284      unsigned char   Status;
           tskpunit.c        285      unsigned char   cmd;
           tskpunit.c        286    
           tskpunit.c        287    //    pMotionnet = (struct StMotionnet *)MOTIONNET_ADDR;
           tskpunit.c        288      
           tskpunit.c        289      // 検査の前に既にエラーが発生していたらクリアする
           tskpunit.c        290      cyclicError = pMotionnetPunit->cyclicCommErrorFlg[0];
    0000016A 66D2                   MOV.L       @R13,R6    ; pMotionnetPunit
    0000016C E0B8                   MOV         #-72,R0    ; H'FFFFFFB8
    0000016E 600C                   EXTU.B      R0,R0
    00000170 026C                   MOV.B       @(R0,R6),R2; pMotionnetPunit->cyclicCommErrorFlg[]
           tskpunit.c        291      pMotionnetPunit->cyclicCommErrorFlg[0] = cyclicError;
           tskpunit.c        292    
           tskpunit.c        293      
           tskpunit.c        294    // シュミレーションモード
           tskpunit.c        295    #if DEBUG_SIM_PRESS != 0
           tskpunit.c        296      
           tskpunit.c        297      Rxdata[0] = 0x00;
           tskpunit.c        298      Rxdata[1] = 0x00;
           tskpunit.c        299    
           tskpunit.c        300      
           tskpunit.c        301      if(
           tskpunit.c        302          ( kind == ID_MSG_PRESSREN    )||
           tskpunit.c        303          ( kind == ID_MSG_PRESSREN_HS )||
           tskpunit.c        304          ( kind == ID_MSG_PRESSTAN    )||
           tskpunit.c        305          ( kind == ID_MSG_PRESSTAN_HS )
           tskpunit.c        306      )
           tskpunit.c        307      {
           tskpunit.c        308          for( loop = 0; loop < NOZZLE_MAX+1; loop++ )
           tskpunit.c        309          {
           tskpunit.c        310              presdat[loop] = loop * 10;
           tskpunit.c        311          }
           tskpunit.c        312          
           tskpunit.c        313          result = mbx_send(
           tskpunit.c        314                              ID_TSK_PUNIT,        // tskid
           tskpunit.c        315                              ID_MPF_CMD,          // mpfid
           tskpunit.c        316                              ID_MBX_CMD,          // mbxid
           tskpunit.c        317                              reqbk.prid1,         // prid1
           tskpunit.c        318                              reqbk.bcid,          // bcid
           tskpunit.c        319                              kind,                // msgid
           tskpunit.c        320                              NO_DATA,             // sts
           tskpunit.c        321                              NO_DATA,             // sts2
           tskpunit.c        322                              (UB *)&presdat[0],   // data
           tskpunit.c        323                              sizeof( presdat )    // siz
           tskpunit.c        324                          );
           tskpunit.c        325      }
           tskpunit.c        326    
           tskpunit.c        327      if(
           tskpunit.c        328          ( kind == ID_MSG_VALVEOUT    )||
           tskpunit.c        329          ( kind == ID_MSG_VALVEOUT_HS )||
           tskpunit.c        330          ( kind == ID_MSG_VALVEINI    )||
           tskpunit.c        331          ( kind == ID_MSG_VALVEINI_HS )||
           tskpunit.c        332          ( kind == ID_MSG_PRESSINI    )||
           tskpunit.c        333          ( kind == ID_MSG_PRESSINI_HS )||
           tskpunit.c        334          ( kind == ID_MSG_PRESSCAN    )||
           tskpunit.c        335          ( kind == ID_MSG_PRESSCAN_HS )
           tskpunit.c        336      )
           tskpunit.c        337      {
           tskpunit.c        338          result = mbx_send(
           tskpunit.c        339                              ID_TSK_PUNIT,        // tskid
           tskpunit.c        340                              ID_MPF_CMD,          // mpfid
           tskpunit.c        341                              ID_MBX_CMD,          // mbxid
           tskpunit.c        342                              reqbk.prid1,         // prid1
           tskpunit.c        343                              reqbk.bcid,          // bcid
           tskpunit.c        344                              kind,                // msgid
           tskpunit.c        345                              NO_DATA,             // sts
           tskpunit.c        346                              NO_DATA,             // sts2
           tskpunit.c        347                              (UB *)&Rxdata[0],    // data
           tskpunit.c        348                              sizeof( Rxdata )     // siz
           tskpunit.c        349                          );
           tskpunit.c        350      }
           tskpunit.c        351      msg_req = CLR;
           tskpunit.c        352      return;
           tskpunit.c        353    #endif
           tskpunit.c        354      
           tskpunit.c        355      
           tskpunit.c        356      switch ( MotionnetState )
    00000172 DC15                   MOV.L       L168+38,R12; __$MotionnetState
    00000174 30C19000               MOVU.W      @(0,R12),R0; MotionnetState
    00000178 2008                   TST         R0,R0
    0000017A 8F02                   BF/S        L171
    0000017C 6E43                   MOV         R4,R14
    0000017E A154                   BRA         L90
    00000180 0009                   NOP
    00000182              L171:
    00000182 8801                   CMP/EQ      #1,R0
    00000184 892C                   BT          L92
    00000186 8802                   CMP/EQ      #2,R0
    00000188 8B01                   BF          L172
    0000018A A08F                   BRA         L94
    0000018C 0009                   NOP
    0000018E              L172:
    0000018E 8803                   CMP/EQ      #3,R0
    00000190 8B01                   BF          L173
    00000192 A0B0                   BRA         L96
    00000194 0009                   NOP
    00000196              L173:
    00000196 8804                   CMP/EQ      #4,R0
    00000198 8B01                   BF          L174
    0000019A A0F3                   BRA         L97
    0000019C 0009                   NOP
    0000019E              L174:
    0000019E A147                   BRA         L98
    000001A0 0009                   NOP
    000001A2              L168:
    000001A2 00000002               .RES.W      1
    000001A4 <00000000>             .DATA.L     _v4_trcv_mbx
    000001A8 <00000000>             .DATA.L     L179
    000001AC <00000000>             .DATA.L     _api_rel_mpf
    000001B0 <00000000>             .DATA.L     __$msg_req
    000001B4 <00000000>             .DATA.L     __$reqbk
    000001B8 <00000000>             .DATA.L     _memcpy
    000001BC <00000000>             .DATA.L     __$actflag
    000001C0 <00000010>             .DATA.L     H'00000010+__$reqbk
    000001C4 <00000000>             .DATA.L     __$vout
    000001C8 <00000000>             .DATA.L     __$MotionnetState
    000001CC <00000000>             .DATA.L     __$renflag
    000001D0 <00000000>             .DATA.L     __$rencnt
    000001D4 <00000000>             .DATA.L     __$renmsg
    000001D8 0C008000               .DATA.L     H'0C008000
    000001DC <00000000>             .DATA.L     _pMotionnetPunit
    000001E0              L92:
           tskpunit.c        357      {
           tskpunit.c        358          case NmMotionnetState_Norequest://0
           tskpunit.c        359              msg_req = CLR;
           tskpunit.c        360              break;
           tskpunit.c        361          
           tskpunit.c        362          case NmMotionnetState_Init://1
           tskpunit.c        363    //            if ( PE.DR.BIT.B4 == 0 ) {
           tskpunit.c        364                  IntrFlg = pMotionnetPunit->inputChangeIntrFlg[0];                                           // 割り込みフラグ取得
    000001E0 6BD2                   MOV.L       @R13,R11   ; pMotionnetPunit
    000001E2 E0E0                   MOV         #-32,R0    ; H'FFFFFFE0
    000001E4 600C                   EXTU.B      R0,R0
    000001E6 04BC                   MOV.B       @(R0,R11),R4; pMotionnetPunit->inputChangeIntrFlg[]
           tskpunit.c        365                  pMotionnetPunit->inputChangeIntrFlg[0] = IntrFlg;                                           // 取得した割り込みフラグを書き込むことでフラグをクリア
           tskpunit.c        366              
           tskpunit.c        367                  pMotionnetPunit->fifo0 = MOTIONNET_CMD_MSG_TX;                                              // ①0001h メッセージ送信コマンドをFIFOに書き込む
    000001E8 E001                   MOV         #1,R0      ; H'00000001
           tskpunit.c        368                  pMotionnetPunit->fifo1 = MOTIONNET_TX_DATA_NOTHING;                                         // 〃
           tskpunit.c        369    
           tskpunit.c        370                  cmd = set_punit_cmd( kind );                                                                // メッセージIDより送信コマンドをセットする
           tskpunit.c        371                  pMotionnetPunit->fifo0 = cmd;                                                               // ②送信用FIFOにメッセージを書き込む   3 or 2
    000001EA 64EC                   EXTU.B      R14,R4
    000001EC 61D2                   MOV.L       @R13,R1    ; pMotionnetPunit
    000001EE 1F41                   MOV.L       R4,@(4,R15)
    000001F0 8016                   MOV.B       R0,@(6,R1) ; (pMotionnetPunit)->fifo0
    000001F2 E000                   MOV         #0,R0      ; H'00000000
    000001F4 2F42                   MOV.L       R4,@R15
    000001F6 62D2                   MOV.L       @R13,R2    ; pMotionnetPunit
           tskpunit.c        372                  pMotionnetPunit->fifo1 = MOTIONNET_TX_DATA_NOTHING;                                         // 〃
           tskpunit.c        373      
           tskpunit.c        374                  if(
    000001F8 6B43                   MOV         R4,R11
    000001FA B126                   BSR         _set_punit_cmd
    000001FC 8027                   MOV.B       R0,@(7,R2) ; (pMotionnetPunit)->fifo1
    000001FE 66D2                   MOV.L       @R13,R6    ; pMotionnetPunit
    00000200 E79B                   MOV         #-101,R7   ; H'FFFFFF9B
    00000202 677C                   EXTU.B      R7,R7
    00000204 8066                   MOV.B       R0,@(6,R6) ; (pMotionnetPunit)->fifo0
    00000206 E000                   MOV         #0,R0      ; H'00000000
    00000208 3B70                   CMP/EQ      R7,R11
    0000020A 65D2                   MOV.L       @R13,R5    ; pMotionnetPunit
    0000020C 8D03                   BT/S        L100
    0000020E 8057                   MOV.B       R0,@(7,R5) ; (pMotionnetPunit)->fifo1
    00000210 60F2                   MOV.L       @R15,R0
    00000212 8822                   CMP/EQ      #34,R0
    00000214 8B19                   BF          L101
    00000216              L100:
           tskpunit.c        375                      ( kind == ID_MSG_VALVEOUT    )||
           tskpunit.c        376                      ( kind == ID_MSG_VALVEOUT_HS )
           tskpunit.c        377                  )
           tskpunit.c        378                  {
           tskpunit.c        379                      wk1 = (unsigned char)((vout.target )     & 0xff);
    00000216 D196                   MOV.L       L169+2,R1  ; __$vout
    00000218 6011                   MOV.W       @R1,R0     ; vout.target
    0000021A E4F8                   MOV         #-8,R4     ; H'FFFFFFF8
           tskpunit.c        380                      wk2 = (unsigned char)((vout.target >> 8) & 0xff);
           tskpunit.c        381                      
           tskpunit.c        382                      pMotionnetPunit->fifo0 = wk1;
    0000021C 62D2                   MOV.L       @R13,R2    ; pMotionnetPunit
    0000021E 650D                   EXTU.W      R0,R5
    00000220 D694                   MOV.L       L169+6,R6  ; __$wk1
    00000222 454C                   SHAD        R4,R5
    00000224 2600                   MOV.B       R0,@R6     ; wk1
    00000226 DB94                   MOV.L       L169+10,R11; __$wk2
    00000228 2B50                   MOV.B       R5,@R11    ; wk2
    0000022A 8026                   MOV.B       R0,@(6,R2) ; (pMotionnetPunit)->fifo0
           tskpunit.c        383                      pMotionnetPunit->fifo1 = wk2;
           tskpunit.c        384                      
           tskpunit.c        385                      
           tskpunit.c        386                      wk3 = (unsigned char)((vout.valout )     & 0xff);
    0000022C D793                   MOV.L       L169+14,R7 ; __$wk3
    0000022E 60B0                   MOV.B       @R11,R0    ; wk2
    00000230 65D2                   MOV.L       @R13,R5    ; pMotionnetPunit
    00000232 8057                   MOV.B       R0,@(7,R5) ; (pMotionnetPunit)->fifo1
    00000234 8511                   MOV.W       @(2,R1),R0 ; vout.valout
           tskpunit.c        387                      wk4 = (unsigned char)((vout.valout >> 8) & 0xff);
           tskpunit.c        388                      pMotionnetPunit->fifo0 = wk3;
    00000236 62D2                   MOV.L       @R13,R2    ; pMotionnetPunit
    00000238 6B0D                   EXTU.W      R0,R11
    0000023A 2700                   MOV.B       R0,@R7     ; wk3
    0000023C 4B4C                   SHAD        R4,R11
    0000023E D190                   MOV.L       L169+18,R1 ; __$wk4
    00000240 21B0                   MOV.B       R11,@R1    ; wk4
    00000242 8026                   MOV.B       R0,@(6,R2) ; (pMotionnetPunit)->fifo0
           tskpunit.c        389                      pMotionnetPunit->fifo1 = wk4;
    00000244 6010                   MOV.B       @R1,R0     ; wk4
    00000246 66D2                   MOV.L       @R13,R6    ; pMotionnetPunit
    00000248 8067                   MOV.B       R0,@(7,R6) ; (pMotionnetPunit)->fifo1
    0000024A              L101:
           tskpunit.c        390                  }
           tskpunit.c        391                  if (
    0000024A E498                   MOV         #-104,R4   ; H'FFFFFF98
    0000024C 61F2                   MOV.L       @R15,R1
    0000024E 644C                   EXTU.B      R4,R4
    00000250 3140                   CMP/EQ      R4,R1
    00000252 8902                   BT          L103
    00000254 6013                   MOV         R1,R0
    00000256 881F                   CMP/EQ      #31,R0
    00000258 8B0A                   BF          L104
    0000025A              L103:
           tskpunit.c        392                      ( kind == ID_MSG_PRESSREN    )||
           tskpunit.c        393                      ( kind == ID_MSG_PRESSREN_HS )
           tskpunit.c        394                  )
           tskpunit.c        395                  {
           tskpunit.c        396                      if ( renflag == OFF ) {
    0000025A D58A                   MOV.L       L169+22,R5 ; __$renflag
    0000025C 6251                   MOV.W       @R5,R2     ; renflag
    0000025E 2228                   TST         R2,R2
    00000260 8B06                   BF          L104
           tskpunit.c        397                          renmsg = kind;
    00000262 D789                   MOV.L       L169+26,R7 ; __$renmsg
           tskpunit.c        398                          renflag = ON;
           tskpunit.c        399                          rencnt = 0;
    00000264 E400                   MOV         #0,R4      ; H'00000000
    00000266 27E0                   MOV.B       R14,@R7    ; renmsg
    00000268 DB88                   MOV.L       L169+30,R11; __$rencnt
    0000026A EE01                   MOV         #1,R14     ; H'00000001
    0000026C 2B41                   MOV.W       R4,@R11    ; rencnt
    0000026E 25E1                   MOV.W       R14,@R5    ; renflag
    00000270              L104:
           tskpunit.c        400                      }
           tskpunit.c        401                  }
           tskpunit.c        402    
           tskpunit.c        403                  if (
    00000270 E69A                   MOV         #-102,R6   ; H'FFFFFF9A
    00000272 666C                   EXTU.B      R6,R6
    00000274 3160                   CMP/EQ      R6,R1
    00000276 8902                   BT          L107
    00000278 6013                   MOV         R1,R0
    0000027A 8821                   CMP/EQ      #33,R0
    0000027C 8B04                   BF          L108
    0000027E              L107:
           tskpunit.c        404                      ( kind == ID_MSG_PRESSCAN    )||
           tskpunit.c        405                      ( kind == ID_MSG_PRESSCAN_HS )
           tskpunit.c        406                  )
           tskpunit.c        407                  {
           tskpunit.c        408                      renflag = OFF;
    0000027E E200                   MOV         #0,R2      ; H'00000000
    00000280 D580                   MOV.L       L169+22,R5 ; __$renflag
           tskpunit.c        409                      rencnt = 0;
    00000282 D682                   MOV.L       L169+30,R6 ; __$rencnt
    00000284 2521                   MOV.W       R2,@R5     ; renflag
    00000286 2621                   MOV.W       R2,@R6     ; rencnt
    00000288              L108:
           tskpunit.c        410                  }
           tskpunit.c        411              
           tskpunit.c        412                  pMotionnetPunit->commandStatus0 = (unsigned char)( MOTIONNET_CMD_DATA_START >> 0 );         // ③データ通信コマンド(4000h)の書き込み
    00000288 6ED2                   MOV.L       @R13,R14   ; pMotionnetPunit
    0000028A EB00                   MOV         #0,R11     ; H'00000000
           tskpunit.c        413                  pMotionnetPunit->commandStatus1 = (unsigned char)( MOTIONNET_CMD_DATA_START >> 8 );         // 〃
    0000028C E040                   MOV         #64,R0     ; H'00000040
           tskpunit.c        414                  pMotionnetPunit->inputChangeIntrSettting[0] = MOTIONNET_INPUT_CHG_INTR_ENABLE;              // 入力割り込み変化許可
    0000028E E201                   MOV         #1,R2      ; H'00000001
    00000290 2EB0                   MOV.B       R11,@R14   ; (pMotionnetPunit)->commandStatus0
           tskpunit.c        415                  MotionnetState = NmMotionnetState_IntrWait1;
    00000292 E502                   MOV         #2,R5      ; H'00000002
    00000294 61D2                   MOV.L       @R13,R1    ; pMotionnetPunit
    00000296 8011                   MOV.B       R0,@(1,R1) ; (pMotionnetPunit)->commandStatus1
    00000298 64D2                   MOV.L       @R13,R4    ; pMotionnetPunit
    0000029A 342100C0               MOV.B       R2,@(192:12,R4); pMotionnetPunit->inputChangeIntrSettting[]
    0000029E 2C51                   MOV.W       R5,@R12    ; MotionnetState
    000002A0 E41E                   MOV         #30,R4     ; H'0000001E
    000002A2 D77B                   MOV.L       L169+34,R7 ; _v4_dly_tsk
    000002A4 7F08                   ADD         #8,R15
    000002A6 4BF4                   MOVMU.L     @R15+,R11
    000002A8 472B                   JMP         @R7
    000002AA 0009                   NOP
    000002AC              L94:
           tskpunit.c        416      dly_tsk(30);
           tskpunit.c        417    //            }
           tskpunit.c        418              break;
           tskpunit.c        419    
           tskpunit.c        420          case NmMotionnetState_IntrWait1://2
           tskpunit.c        421    //            if ( PE.DR.BIT.B4 == 0 ) {
           tskpunit.c        422                      Status = pMotionnetPunit->commandStatus0;                                                   // ステータスを取得
    000002AC 65D2                   MOV.L       @R13,R5    ; pMotionnetPunit
    000002AE 6250                   MOV.B       @R5,R2     ; (pMotionnetPunit)->commandStatus0
           tskpunit.c        423    
           tskpunit.c        424                  if ( Status & MOTIONNET_STATUS_INPUT_CHG_INTR ){                                        // 0x04 
    000002B0 872A                   BLD         #2,R2
    000002B2 8901                   BT          L175
    000002B4 A0BC                   BRA         L98
    000002B6 0009                   NOP
    000002B8              L175:
           tskpunit.c        425                      if ( Status & MOTIONNET_STATUS_DATA_TRNS_COMP ){                                    // データ通信完了 0x01
    000002B8 8728                   BLD         #0,R2
    000002BA 8901                   BT          L176
    000002BC A0B8                   BRA         L98
    000002BE 0009                   NOP
    000002C0              L176:
           tskpunit.c        426                          IntrFlg = pMotionnetPunit->inputChangeIntrFlg[0];                                   // 割り込みフラグ取得
    000002C0 325180E0               MOVU.B      @(224,R5),R2; pMotionnetPunit->inputChangeIntrFlg[]
           tskpunit.c        427                          if ( IntrFlg == MOTIONNET_INTR_FLAG ){                                          // 割り込みフラグあり0x01
    000002C4 6023                   MOV         R2,R0
    000002C6 8801                   CMP/EQ      #1,R0
    000002C8 8901                   BT          L177
    000002CA A0B1                   BRA         L98
    000002CC 0009                   NOP
    000002CE              L177:
           tskpunit.c        428                              pMotionnetPunit->inputChangeIntrFlg[0] = IntrFlg;                               // 取得した割り込みフラグを書き込むことでフラグをクリア
    000002CE 352100E0               MOV.B       R2,@(224:12,R5); pMotionnetPunit->inputChangeIntrFlg[]
           tskpunit.c        429                              pMotionnetPunit->fifo0 = MOTIONNET_CMD_MSG_TX;                                  // 0001h メッセージ送信コマンドをFIFOに書き込む
    000002D2 67D2                   MOV.L       @R13,R7    ; pMotionnetPunit
    000002D4 E601                   MOV         #1,R6      ; H'00000001
    000002D6 6063                   MOV         R6,R0
           tskpunit.c        430                              pMotionnetPunit->fifo1 = MOTIONNET_TX_DATA_NOTHING;                             // 0001h メッセージ送信コマンドをFIFOに書き込む
           tskpunit.c        431    
           tskpunit.c        432                              pMotionnetPunit->commandStatus0 = (unsigned char)( (MOTIONNET_CMD_DATA_START) >> 0 );// データ通信コマンド(4000h)の書き込み
           tskpunit.c        433                              pMotionnetPunit->commandStatus1 = (unsigned char)( (MOTIONNET_CMD_DATA_START)  >> 8 );  // データ通信コマンド(4000h)の書き込み
           tskpunit.c        434                              pMotionnetPunit->inputChangeIntrSettting[0] = MOTIONNET_INPUT_CHG_INTR_ENABLE;  // 入力割り込み変化許可
           tskpunit.c        435                              MotionnetState = NmMotionnetState_IntrWait2;                                // 遷移
    000002D8 E403                   MOV         #3,R4      ; H'00000003
    000002DA 8076                   MOV.B       R0,@(6,R7) ; (pMotionnetPunit)->fifo0
    000002DC E000                   MOV         #0,R0      ; H'00000000
    000002DE 6BD2                   MOV.L       @R13,R11   ; pMotionnetPunit
    000002E0 80B7                   MOV.B       R0,@(7,R11); (pMotionnetPunit)->fifo1
    000002E2 6ED2                   MOV.L       @R13,R14   ; pMotionnetPunit
    000002E4 2E00                   MOV.B       R0,@R14    ; (pMotionnetPunit)->commandStatus0
    000002E6 E040                   MOV         #64,R0     ; H'00000040
    000002E8 61D2                   MOV.L       @R13,R1    ; pMotionnetPunit
    000002EA 8011                   MOV.B       R0,@(1,R1) ; (pMotionnetPunit)->commandStatus1
    000002EC 62D2                   MOV.L       @R13,R2    ; pMotionnetPunit
    000002EE 326100C0               MOV.B       R6,@(192:12,R2); pMotionnetPunit->inputChangeIntrSettting[]
    000002F2 A09D                   BRA         L98
    000002F4 2C41                   MOV.W       R4,@R12    ; MotionnetState
    000002F6              L96:
           tskpunit.c        436                          }
           tskpunit.c        437                      }
           tskpunit.c        438                  }
           tskpunit.c        439    //                else
           tskpunit.c        440    //                {
           tskpunit.c        441    //                }
           tskpunit.c        442    //            }
           tskpunit.c        443              break;
           tskpunit.c        444    
           tskpunit.c        445          case NmMotionnetState_IntrWait2:
           tskpunit.c        446    //            if ( PE.DR.BIT.B4 == 0 ) {
           tskpunit.c        447                  Status = pMotionnetPunit->commandStatus0;                                                   // ステータスを取得
    000002F6 67D2                   MOV.L       @R13,R7    ; pMotionnetPunit
           tskpunit.c        448                  if ( Status & MOTIONNET_STATUS_DATA_TRNS_COMP ){                                        // データ通信完了0x01
    000002F8 37093000               BLD.B       #0,@(0,R7) ; (pMotionnetPunit)->commandStatus0
    000002FC 8901                   BT          L178
    000002FE A097                   BRA         L98
    00000300 0009                   NOP
    00000302              L178:
    00000302 8477                   MOV.B       @(7,R7),R0 ; (pMotionnetPunit)->fifo1
    00000304 E198                   MOV         #-104,R1   ; H'FFFFFF98
           tskpunit.c        449                      if(
    00000306 62EC                   EXTU.B      R14,R2
    00000308 6603                   MOV         R0,R6
    0000030A 8476                   MOV.B       @(6,R7),R0 ; (pMotionnetPunit)->fifo0
    0000030C 611C                   EXTU.B      R1,R1
    0000030E 3210                   CMP/EQ      R1,R2
    00000310 8D12                   BT/S        L114
    00000312 6503                   MOV         R0,R5
    00000314 6023                   MOV         R2,R0
    00000316 881F                   CMP/EQ      #31,R0
    00000318 890E                   BT          L114
    0000031A E199                   MOV         #-103,R1   ; H'FFFFFF99
    0000031C 611C                   EXTU.B      R1,R1
    0000031E 3210                   CMP/EQ      R1,R2
    00000320 890A                   BT          L114
    00000322 8820                   CMP/EQ      #32,R0
    00000324 8908                   BT          L114
           tskpunit.c        450                          ( kind == ID_MSG_PRESSREN    )||
           tskpunit.c        451                          ( kind == ID_MSG_PRESSREN_HS )||
           tskpunit.c        452                          ( kind == ID_MSG_PRESSTAN    )||
           tskpunit.c        453                          ( kind == ID_MSG_PRESSTAN_HS )
           tskpunit.c        454                      )
           tskpunit.c        455                      {
           tskpunit.c        456                          for( loop = 0; loop < (NOZZLE_MAX+1);  loop++ )
           tskpunit.c        457                          {
           tskpunit.c        458                              wk1  = pMotionnetPunit->fifo0;
           tskpunit.c        459                              wk2  = pMotionnetPunit->fifo1;
           tskpunit.c        460                              
           tskpunit.c        461                              
           tskpunit.c        462    //                            presdat[loop] = wk2 + wk1 * 0x100;
           tskpunit.c        463                              presdat[loop] = wk1 + wk2 * 0x100;
           tskpunit.c        464                              
           tskpunit.c        465                              
           tskpunit.c        466                          }
           tskpunit.c        467                      }
           tskpunit.c        468                      else
           tskpunit.c        469                      {
           tskpunit.c        470                          Rxdata[0]  = pMotionnetPunit->fifo1;
    00000326 D45B                   MOV.L       L169+38,R4 ; __$Rxdata
    00000328 2460                   MOV.B       R6,@R4     ; Rxdata[]
           tskpunit.c        471                          Rxdata[1]  = pMotionnetPunit->fifo0;
    0000032A 6053                   MOV         R5,R0
    0000032C 8041                   MOV.B       R0,@(1,R4) ; Rxdata[]
           tskpunit.c        472                                                                  // ＣＭＤのレスポンス
           tskpunit.c        473                          Rxdata[2]  = pMotionnetPunit->fifo1;
    0000032E 6063                   MOV         R6,R0
    00000330 8042                   MOV.B       R0,@(2,R4) ; Rxdata[]
           tskpunit.c        474                          Rxdata[3]  = pMotionnetPunit->fifo0;
    00000332 6053                   MOV         R5,R0
    00000334 A015                   BRA         L118
    00000336 8043                   MOV.B       R0,@(3,R4) ; Rxdata[]
    00000338              L114:
    00000338 E500                   MOV         #0,R5      ; H'00000000
    0000033A 6153                   MOV         R5,R1
    0000033C              L119:
    0000033C 8476                   MOV.B       @(6,R7),R0 ; (pMotionnetPunit)->fifo0
    0000033E 7501                   ADD         #1,R5
    00000340 D24C                   MOV.L       L169+6,R2  ; __$wk1
    00000342 2200                   MOV.B       R0,@R2     ; wk1
    00000344 32718007               MOVU.B      @(7,R7),R2 ; (pMotionnetPunit)->fifo1
    00000348 D64B                   MOV.L       L169+10,R6 ; __$wk2
    0000034A 2620                   MOV.B       R2,@R6     ; wk2
    0000034C 4218                   SHLL8       R2
    0000034E 640C                   EXTU.B      R0,R4
    00000350 EE0D                   MOV         #13,R14    ; H'0000000D
    00000352 324C                   ADD         R4,R2
    00000354 6013                   MOV         R1,R0
    00000356 DB50                   MOV.L       L169+42,R11; __$presdat
    00000358 0B25                   MOV.W       R2,@(R0,R11); presdat[]
    0000035A 625C                   EXTU.B      R5,R2
    0000035C 32E3                   CMP/GE      R14,R2
    0000035E 8FED                   BF/S        L119
    00000360 7102                   ADD         #2,R1
    00000362              L118:
           tskpunit.c        475                                                                  // 成功/失敗のレスポンス
           tskpunit.c        476    
           tskpunit.c        477                      }
           tskpunit.c        478    
           tskpunit.c        479                      
           tskpunit.c        480                      pMotionnetPunit->fifo0 = MOTIONNET_CMD_TX_FLAG_RST;                                     // 0002h 送信処理中フラグリセット書き込む
    00000362 E002                   MOV         #2,R0      ; H'00000002
           tskpunit.c        481                      pMotionnetPunit->fifo1 = MOTIONNET_TX_DATA_NOTHING;                                     // 0002h 送信処理中フラグリセット書き込む
           tskpunit.c        482    
           tskpunit.c        483    //                    pMotionnetPunit->fifo0 = Rxdata[0];                                                         // 受信データを送信
           tskpunit.c        484    //                    pMotionnetPunit->fifo1 = Rxdata[1];                                     // 受信データを送信
           tskpunit.c        485    //                    pMotionnetPunit->fifo1 = MOTIONNET_TX_DATA_NOTHING;                                     // 受信データを送信
           tskpunit.c        486                      pMotionnetPunit->commandStatus0 = (unsigned char)( (MOTIONNET_CMD_DATA_START) >> 0 );       // データ通信コマンド(4000h)の書き込み
           tskpunit.c        487                      pMotionnetPunit->commandStatus1 = (unsigned char)( (MOTIONNET_CMD_DATA_START) >> 8 );       // データ通信コマンド(4000h)の書き込み
           tskpunit.c        488                      pMotionnetPunit->inputChangeIntrSettting[0] = MOTIONNET_INPUT_CHG_INTR_ENABLE;          // 入力割り込み変化許可
    00000364 E601                   MOV         #1,R6      ; H'00000001
    00000366 8076                   MOV.B       R0,@(6,R7) ; (pMotionnetPunit)->fifo0
    00000368 E000                   MOV         #0,R0      ; H'00000000
    0000036A 6BD2                   MOV.L       @R13,R11   ; pMotionnetPunit
    0000036C 80B7                   MOV.B       R0,@(7,R11); (pMotionnetPunit)->fifo1
    0000036E 6ED2                   MOV.L       @R13,R14   ; pMotionnetPunit
    00000370 2E00                   MOV.B       R0,@R14    ; (pMotionnetPunit)->commandStatus0
    00000372 E040                   MOV         #64,R0     ; H'00000040
    00000374 61D2                   MOV.L       @R13,R1    ; pMotionnetPunit
    00000376 8011                   MOV.B       R0,@(1,R1) ; (pMotionnetPunit)->commandStatus1
    00000378 62D2                   MOV.L       @R13,R2    ; pMotionnetPunit
    0000037A 326100C0               MOV.B       R6,@(192:12,R2); pMotionnetPunit->inputChangeIntrSettting[]
           tskpunit.c        489                      MotionnetState = NmMotionnetState_IntrWait3;                                        // 遷移
    0000037E E204                   MOV         #4,R2      ; H'00000004
    00000380 A056                   BRA         L98
    00000382 2C21                   MOV.W       R2,@R12    ; MotionnetState
    00000384              L97:
           tskpunit.c        490                  }
           tskpunit.c        491    //            }
           tskpunit.c        492              break;
           tskpunit.c        493    
           tskpunit.c        494          case NmMotionnetState_IntrWait3:
           tskpunit.c        495    //            if ( PE.DR.BIT.B4 == 0 ) {
           tskpunit.c        496                  Status = pMotionnetPunit->commandStatus0;                                                   // ステータスを取得
    00000384 66D2                   MOV.L       @R13,R6    ; pMotionnetPunit
           tskpunit.c        497                  if ( Status & MOTIONNET_STATUS_DATA_TRNS_COMP ){                                        // データ通信完了
    00000386 36093000               BLD.B       #0,@(0,R6) ; (pMotionnetPunit)->commandStatus0
    0000038A 8B4E                   BF          L90
           tskpunit.c        498                      MotionnetState = NmMotionnetState_Norequest;                                        // 遷移
           tskpunit.c        499                      actflag = CLR;
           tskpunit.c        500    
           tskpunit.c        501                      if(
    0000038C 61EC                   EXTU.B      R14,R1
    0000038E E200                   MOV         #0,R2      ; H'00000000
    00000390 D642                   MOV.L       L169+46,R6 ; __$actflag
    00000392 6013                   MOV         R1,R0
    00000394 881F                   CMP/EQ      #31,R0
    00000396 2C21                   MOV.W       R2,@R12    ; MotionnetState
    00000398 2621                   MOV.W       R2,@R6     ; actflag
    0000039A 8D02                   BT/S        L122
    0000039C 2F12                   MOV.L       R1,@R15
    0000039E 8820                   CMP/EQ      #32,R0
    000003A0 8B14                   BF          L123
    000003A2              L122:
           tskpunit.c        502                          ( kind == ID_MSG_PRESSREN_HS )||
           tskpunit.c        503                          ( kind == ID_MSG_PRESSTAN_HS )
           tskpunit.c        504                      )
           tskpunit.c        505                      {
           tskpunit.c        506                          result = mbx_send(
           tskpunit.c        507                                              ID_TSK_PUNIT,        // tskid
           tskpunit.c        508                                              ID_MPF_CMD,          // mpfid
           tskpunit.c        509                                              ID_MBX_CMD,          // mbxid
           tskpunit.c        510                                              reqbk.prid1,         // prid1
           tskpunit.c        511                                              reqbk.bcid,          // bcid
           tskpunit.c        512                                              kind,                // msgid
           tskpunit.c        513                                              NO_DATA,             // sts
           tskpunit.c        514                                              NO_DATA,             // sts2
           tskpunit.c        515                                              (UB *)&presdat[0],   // data
           tskpunit.c        516                                              sizeof( presdat )    // siz
           tskpunit.c        517                                          );
    000003A2 EB1A                   MOV         #26,R11    ; H'0000001A
    000003A4 2FB6                   MOV.L       R11,@-R15
    000003A6 DC3C                   MOV.L       L169+42,R12; __$presdat
    000003A8 2FC6                   MOV.L       R12,@-R15
    000003AA EEFF                   MOV         #-1,R14    ; H'FFFFFFFF
    000003AC 6EEC                   EXTU.B      R14,R14
    000003AE 2FE6                   MOV.L       R14,@-R15
    000003B0 2FE6                   MOV.L       R14,@-R15
    000003B2 2F16                   MOV.L       R1,@-R15
    000003B4 D73A                   MOV.L       L169+50,R7 ; __$reqbk
    000003B6 30718006               MOVU.B      @(6,R7),R0 ; reqbk.bcid
    000003BA 2F06                   MOV.L       R0,@-R15
    000003BC E605                   MOV         #5,R6      ; H'00000005
    000003BE 8474                   MOV.B       @(4,R7),R0 ; reqbk.prid1
    000003C0 E504                   MOV         #4,R5      ; H'00000004
    000003C2 E40D                   MOV         #13,R4     ; H'0000000D
    000003C4 DD37                   MOV.L       L169+54,R13; _mbx_send
    000003C6 4D0B                   JSR         @R13
    000003C8 6703                   MOV         R0,R7
    000003CA 7F18                   ADD         #24,R15
    000003CC              L123:
           tskpunit.c        518                      }
           tskpunit.c        519    
           tskpunit.c        520                      if(
    000003CC 61F2                   MOV.L       @R15,R1
    000003CE E69B                   MOV         #-101,R6   ; H'FFFFFF9B
    000003D0 666C                   EXTU.B      R6,R6
    000003D2 3160                   CMP/EQ      R6,R1
    000003D4 8914                   BT          L125
    000003D6 6013                   MOV         R1,R0
    000003D8 8822                   CMP/EQ      #34,R0
    000003DA 8911                   BT          L125
    000003DC E696                   MOV         #-106,R6   ; H'FFFFFF96
    000003DE 666C                   EXTU.B      R6,R6
    000003E0 3160                   CMP/EQ      R6,R1
    000003E2 890D                   BT          L125
    000003E4 881D                   CMP/EQ      #29,R0
    000003E6 890B                   BT          L125
    000003E8 E697                   MOV         #-105,R6   ; H'FFFFFF97
    000003EA 666C                   EXTU.B      R6,R6
    000003EC 3160                   CMP/EQ      R6,R1
    000003EE 8907                   BT          L125
    000003F0 881E                   CMP/EQ      #30,R0
    000003F2 8905                   BT          L125
    000003F4 E69A                   MOV         #-102,R6   ; H'FFFFFF9A
    000003F6 666C                   EXTU.B      R6,R6
    000003F8 3160                   CMP/EQ      R6,R1
    000003FA 8901                   BT          L125
    000003FC 8821                   CMP/EQ      #33,R0
    000003FE 8B14                   BF          L90
    00000400              L125:
           tskpunit.c        521                          ( kind == ID_MSG_VALVEOUT    )||
           tskpunit.c        522                          ( kind == ID_MSG_VALVEOUT_HS )||
           tskpunit.c        523                          ( kind == ID_MSG_VALVEINI    )||
           tskpunit.c        524                          ( kind == ID_MSG_VALVEINI_HS )||
           tskpunit.c        525                          ( kind == ID_MSG_PRESSINI    )||
           tskpunit.c        526                          ( kind == ID_MSG_PRESSINI_HS )||
           tskpunit.c        527                          ( kind == ID_MSG_PRESSCAN    )||
           tskpunit.c        528                          ( kind == ID_MSG_PRESSCAN_HS )
           tskpunit.c        529                      )
           tskpunit.c        530                      {
           tskpunit.c        531                          result = mbx_send(
           tskpunit.c        532                                              ID_TSK_PUNIT,        // tskid
           tskpunit.c        533                                              ID_MPF_CMD,          // mpfid
           tskpunit.c        534                                              ID_MBX_CMD,          // mbxid
           tskpunit.c        535                                              reqbk.prid1,         // prid1
           tskpunit.c        536                                              reqbk.bcid,          // bcid
           tskpunit.c        537                                              kind,                // msgid
           tskpunit.c        538                                              NO_DATA,             // sts
           tskpunit.c        539                                              NO_DATA,             // sts2
           tskpunit.c        540                                              (UB *)&Rxdata[0],    // data
           tskpunit.c        541                                              sizeof( Rxdata )     // siz
           tskpunit.c        542                                          );
    00000400 EB04                   MOV         #4,R11     ; H'00000004
    00000402 2FB6                   MOV.L       R11,@-R15
    00000404 DC23                   MOV.L       L169+38,R12; __$Rxdata
    00000406 2FC6                   MOV.L       R12,@-R15
    00000408 EEFF                   MOV         #-1,R14    ; H'FFFFFFFF
    0000040A 6EEC                   EXTU.B      R14,R14
    0000040C 2FE6                   MOV.L       R14,@-R15
    0000040E 2FE6                   MOV.L       R14,@-R15
    00000410 2F16                   MOV.L       R1,@-R15
    00000412 D723                   MOV.L       L169+50,R7 ; __$reqbk
    00000414 30718006               MOVU.B      @(6,R7),R0 ; reqbk.bcid
    00000418 2F06                   MOV.L       R0,@-R15
    0000041A E605                   MOV         #5,R6      ; H'00000005
    0000041C 8474                   MOV.B       @(4,R7),R0 ; reqbk.prid1
    0000041E E504                   MOV         #4,R5      ; H'00000004
    00000420 E40D                   MOV         #13,R4     ; H'0000000D
    00000422 DD20                   MOV.L       L169+54,R13; _mbx_send
    00000424 4D0B                   JSR         @R13
    00000426 6703                   MOV         R0,R7
    00000428 7F18                   ADD         #24,R15
    0000042A              L90:
    0000042A E200                   MOV         #0,R2      ; H'00000000
    0000042C D61E                   MOV.L       L169+58,R6 ; __$msg_req
    0000042E 2620                   MOV.B       R2,@R6     ; msg_req
    00000430              L98:
    00000430 7F08                   ADD         #8,R15
    00000432 4BF4                   MOVMU.L     @R15+,R11
    00000434 006B                   RTS/N
           tskpunit.c        543                      }
           tskpunit.c        544                  }
           tskpunit.c        545                  msg_req = CLR;
           tskpunit.c        546    //            }
           tskpunit.c        547              break;
           tskpunit.c        548      }
           tskpunit.c        549    }
           tskpunit.c        550    
           tskpunit.c        551    /***********************************************************************
           tskpunit.c        552    * 
           tskpunit.c        553    * [概要]  
           tskpunit.c        554    * [引数]  
           tskpunit.c        555    * [戻値]  
           tskpunit.c        556    * 
           tskpunit.c        557    ***********************************************************************/
           tskpunit.c        558    void PressDataGet( unsigned short *buf )
    00000436              _PressDataGet:                   ; function: PressDataGet
                                                           ; frame size=0
           tskpunit.c        559    {
           tskpunit.c        560      unsigned char   loop;
           tskpunit.c        561    
           tskpunit.c        562      for( loop = 0; loop < (NOZZLE_MAX+1);  loop++ )
    00000436 E600                   MOV         #0,R6      ; H'00000000
    00000438 E10D                   MOV         #13,R1     ; H'0000000D
    0000043A D517                   MOV.L       L169+42,R5 ; __$presdat
    0000043C              L133:
    0000043C 7601                   ADD         #1,R6
           tskpunit.c        563      {
           tskpunit.c        564          *buf = presdat[loop];
    0000043E 6055                   MOV.W       @R5+,R0    ; presdat[]
    00000440 626C                   EXTU.B      R6,R2
    00000442 3213                   CMP/GE      R1,R2
    00000444 8FFA                   BF/S        L133
    00000446 449B                   MOV.W       R0,@R4+    ; *(buf)
           tskpunit.c        565          *buf++;
           tskpunit.c        566      }
           tskpunit.c        567    }
    00000448 006B                   RTS/N
           tskpunit.c        568    /***********************************************************************
           tskpunit.c        569    * 
           tskpunit.c        570    * [概要]  
           tskpunit.c        571    * [引数]  
           tskpunit.c        572    * [戻値]  
           tskpunit.c        573    * 
           tskpunit.c        574    ***********************************************************************/
           tskpunit.c        575    unsigned char set_punit_cmd( unsigned char kind )
    0000044A              _set_punit_cmd:                  ; function: set_punit_cmd
                                                           ; frame size=0
    0000044A E696                   MOV         #-106,R6   ; H'FFFFFF96
           tskpunit.c        576    {
           tskpunit.c        577      unsigned char cmd;
           tskpunit.c        578      switch( kind )
    0000044C 624C                   EXTU.B      R4,R2
    0000044E 666C                   EXTU.B      R6,R6
    00000450 3260                   CMP/EQ      R6,R2
    00000452 8902                   BT          L151
    00000454 6023                   MOV         R2,R0
    00000456 881D                   CMP/EQ      #29,R0
    00000458 8B01                   BF          L152
    0000045A              L151:
           tskpunit.c        579      {
           tskpunit.c        580    
           tskpunit.c        581      case ID_MSG_VALVEINI:
           tskpunit.c        582      case ID_MSG_VALVEINI_HS:
           tskpunit.c        583          cmd = MNET_CMD_VALVEOUT_INI;
    0000045A A046                   BRA         L153
    0000045C 0239                   MOVRT       R2
    0000045E              L152:
    0000045E E697                   MOV         #-105,R6   ; H'FFFFFF97
    00000460 666C                   EXTU.B      R6,R6
    00000462 3260                   CMP/EQ      R6,R2
    00000464 8901                   BT          L155
    00000466 881E                   CMP/EQ      #30,R0
    00000468 8B20                   BF          L156
    0000046A              L155:
           tskpunit.c        584          break;
           tskpunit.c        585    
           tskpunit.c        586      case ID_MSG_PRESSINI:
           tskpunit.c        587      case ID_MSG_PRESSINI_HS:
           tskpunit.c        588          cmd = MNET_CMD_PRESSURE_INI;
    0000046A A03E                   BRA         L153
    0000046C 0229                   MOVT        R2
    0000046E              L169:
    0000046E 00000002               .RES.W      1
    00000470 <00000000>             .DATA.L     __$vout
    00000474 <00000000>             .DATA.L     __$wk1
    00000478 <00000000>             .DATA.L     __$wk2
    0000047C <00000000>             .DATA.L     __$wk3
    00000480 <00000000>             .DATA.L     __$wk4
    00000484 <00000000>             .DATA.L     __$renflag
    00000488 <00000000>             .DATA.L     __$renmsg
    0000048C <00000000>             .DATA.L     __$rencnt
    00000490 <00000000>             .DATA.L     _v4_dly_tsk
    00000494 <00000000>             .DATA.L     __$Rxdata
    00000498 <00000000>             .DATA.L     __$presdat
    0000049C <00000000>             .DATA.L     __$actflag
    000004A0 <00000000>             .DATA.L     __$reqbk
    000004A4 <00000000>             .DATA.L     _mbx_send
    000004A8 <00000000>             .DATA.L     __$msg_req
    000004AC              L156:
    000004AC E698                   MOV         #-104,R6   ; H'FFFFFF98
    000004AE 666C                   EXTU.B      R6,R6
    000004B0 3260                   CMP/EQ      R6,R2
    000004B2 8901                   BT          L158
    000004B4 881F                   CMP/EQ      #31,R0
    000004B6 8B01                   BF          L159
    000004B8              L158:
           tskpunit.c        589          break;
           tskpunit.c        590          
           tskpunit.c        591      case ID_MSG_PRESSREN:
           tskpunit.c        592      case ID_MSG_PRESSREN_HS:
           tskpunit.c        593          cmd = MNET_CMD_PRESSURE_REN;
    000004B8 A017                   BRA         L153
    000004BA E202                   MOV         #2,R2      ; H'00000002
    000004BC              L159:
    000004BC E699                   MOV         #-103,R6   ; H'FFFFFF99
    000004BE 666C                   EXTU.B      R6,R6
    000004C0 3260                   CMP/EQ      R6,R2
    000004C2 8901                   BT          L161
    000004C4 8820                   CMP/EQ      #32,R0
    000004C6 8B01                   BF          L162
    000004C8              L161:
           tskpunit.c        594          break;
           tskpunit.c        595          
           tskpunit.c        596      case ID_MSG_PRESSTAN:
           tskpunit.c        597      case ID_MSG_PRESSTAN_HS:
           tskpunit.c        598          cmd = MNET_CMD_PRESSURE_TAN;
    000004C8 A00F                   BRA         L153
    000004CA E203                   MOV         #3,R2      ; H'00000003
    000004CC              L162:
    000004CC E69A                   MOV         #-102,R6   ; H'FFFFFF9A
    000004CE 666C                   EXTU.B      R6,R6
    000004D0 3260                   CMP/EQ      R6,R2
    000004D2 8901                   BT          L164
    000004D4 8821                   CMP/EQ      #33,R0
    000004D6 8B01                   BF          L165
    000004D8              L164:
           tskpunit.c        599          break;
           tskpunit.c        600          
           tskpunit.c        601      case ID_MSG_PRESSCAN:
           tskpunit.c        602      case ID_MSG_PRESSCAN_HS:
           tskpunit.c        603          cmd = MNET_CMD_PRESSURE_CAN;
    000004D8 A007                   BRA         L153
    000004DA E204                   MOV         #4,R2      ; H'00000004
    000004DC              L165:
    000004DC E69B                   MOV         #-101,R6   ; H'FFFFFF9B
    000004DE 666C                   EXTU.B      R6,R6
    000004E0 3260                   CMP/EQ      R6,R2
    000004E2 8901                   BT          L167
    000004E4 8822                   CMP/EQ      #34,R0
    000004E6 8B00                   BF          L153
    000004E8              L167:
           tskpunit.c        604          break;
           tskpunit.c        605          
           tskpunit.c        606      case ID_MSG_VALVEOUT:
           tskpunit.c        607      case ID_MSG_VALVEOUT_HS:
           tskpunit.c        608          cmd = MNET_CMD_VALVEOUT_REQ;
    000004E8 E205                   MOV         #5,R2      ; H'00000005
    000004EA              L153:
           tskpunit.c        609          break;
           tskpunit.c        610    
           tskpunit.c        611      default:
           tskpunit.c        612          break;
           tskpunit.c        613      }
           tskpunit.c        614      return cmd;
           tskpunit.c        615    }
    000004EA 027B                   RTV/N       R2
           tskpunit.c        616    
C   00000000              L179:
    00000000 433A5C5573             .SDATA      "C:\Users\SeijiYamazaki\Documents\Quickgene\Soft_Firm\QuickGene_Project2\tskpunit.c"
             6572735C53   
             65696A6959   
             616D617A61   
             6B695C446F   
             63756D656E   
             74735C5175   
             69636B6765   
             6E655C536F   
             66745F4669   
             726D5C5175   
             69636B4765   
             6E655F5072   
             6F6A656374   
             325C74736B   
             70756E6974   
             2E63         
    00000052 00                     .DATA.B     H'00
B   00000000              _pMotionnetPunit:                ; static: pMotionnetPunit
    00000000 00000004               .RES.L      1
    00000004              __$MotionnetState:               ; static: __$MotionnetState
    00000004 00000002               .RES.W      1
    00000006              __$msg_req:                      ; static: __$msg_req
    00000006 00000001               .RES.B      1
    00000007 00000001               .RES.B      1
    00000008              __$vout:                         ; static: __$vout
    00000008 00000002               .RES.W      2
    0000000C              __$reqbk:                        ; static: __$reqbk
    0000000C 00000004               .RES.L      19
    00000058              __$presdat:                      ; static: __$presdat
    00000058 00000002               .RES.W      13
    00000072              __$renmsg:                       ; static: __$renmsg
    00000072 00000001               .RES.B      1
    00000073 00000001               .RES.B      1
    00000074              __$renflag:                      ; static: __$renflag
    00000074 00000002               .RES.W      1
    00000076              __$rencnt:                       ; static: __$rencnt
    00000076 00000002               .RES.W      1
    00000078              __$actflag:                      ; static: __$actflag
    00000078 00000002               .RES.W      1
    0000007A              __$wk1:                          ; static: __$wk1
    0000007A 00000001               .RES.B      1
    0000007B              __$wk2:                          ; static: __$wk2
    0000007B 00000001               .RES.B      1
    0000007C              __$wk3:                          ; static: __$wk3
    0000007C 00000001               .RES.B      1
    0000007D              __$wk4:                          ; static: __$wk4
    0000007D 00000001               .RES.B      1
    0000007E              __$Rxdata:                       ; static: __$Rxdata
    0000007E 00000001               .RES.B      4
SH SERIES C/C++ Compiler (V.9.02.00.003)                                                         08-Sep-2023 13:46:36  PAGE    1


******** STATISTICS INFORMATION ********


********** ERROR INFORMATION ***********

NUMBER OF ERRORS:           0
NUMBER OF WARNINGS:         0




******* SOURCE LINE INFORMATION ********

COMPILED SOURCE LINE:      616



******* SECTION SIZE INFORMATION *******

PROGRAM  SECTION (P):                                 000004EC Byte(s)
CONSTANT SECTION (C):                                 00000053 Byte(s)
DATA     SECTION (D):                                 00000000 Byte(s)
BSS      SECTION (B):                                 00000082 Byte(s)

TOTAL PROGRAM  SECTION: 000004EC Byte(s)
TOTAL CONSTANT SECTION: 00000053 Byte(s)
TOTAL DATA     SECTION: 00000000 Byte(s)
TOTAL BSS      SECTION: 00000082 Byte(s)

    TOTAL PROGRAM SIZE: 000005C1 Byte(s)



********** LABEL INFORMATION ***********

NUMBER OF EXTERNAL REFERENCE SYMBOLS:            5
NUMBER OF EXTERNAL DEFINITION SYMBOLS:           6
NUMBER OF INTERNAL/EXTERNAL SYMBOLS:            64



*** COMMAND PARAMETER ***

-subcommand=C:\Users\SeijiYamazaki\Documents\Quickgene\Soft_Firm\QuickGene_Project2\Debug\tskpunit.shc
-cpu=sh2a
-include="C:\NORTi\INC","C:\NORTi\INC\Dummy","C:\NORTi\INC","C:\NORTi\LIB"
-object="C:\Users\SeijiYamazaki\Documents\Quickgene\Soft_Firm\QuickGene_Project2\Debug\tskpunit.obj"
-debug
-listfile="C:\Users\SeijiYamazaki\Documents\Quickgene\Soft_Firm\QuickGene_Project2\Debug\tskpunit.lst"
-show=source,tab=4
-gbr=auto
-chgincpath
-errorpath
"C:\Users\SeijiYamazaki\Documents\Quickgene\Soft_Firm\QuickGene_Project2\tskpunit.c"
-global_volatile=0
-opt_range=all
-infinite_loop=0
-del_vacant_loop=0
-struct_alloc=1
-lang=c
-nologo
